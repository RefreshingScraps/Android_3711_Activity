plugins {
    // Plugins automatically generated by MLGradleWriter.kt
    alias(libs.plugins.android.library)
    alias(libs.plugins.kotlin.android)
}

android {
    namespace 'com.a3711activity'
    compileSdk 36

    defaultConfig {
        minSdk 21
        targetSdk 34
        versionCode 1
        versionName '1.0'
    }

    buildFeatures {
        viewBinding true
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }
    kotlin {
        compilerOptions {
            jvmTarget.set(org.jetbrains.kotlin.gradle.dsl.JvmTarget.JVM_17)
        }
    }
}

afterEvaluate {
    def genDir = file("src/main/java/com/a3711activity")
    genDir.deleteDir()
    genDir.mkdirs()

    // 生成 3711 个 Activity
    for (int i = 0; i < 3711; i++) {
        def activityName = "ActivityA79fS2k_$i"
        def code = """
package com.a3711activity;
import android.app.Activity;
import android.os.Bundle;

public class $activityName extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        finish(); // 一启动就关闭
    }
}
        """.trim()
        def file = new File(genDir, "${activityName}.java")
        file.text = code
    }
}

dependencies {
    implementation libs.androidx.core.ktx
    implementation libs.androidx.appcompat
    //multidex 64K问题
    implementation libs.multidex
    implementation 'com.google.android.material:material:+'
}

  
